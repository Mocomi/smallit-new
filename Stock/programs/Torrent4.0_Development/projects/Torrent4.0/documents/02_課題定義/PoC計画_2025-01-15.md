# PoC計画（Draft v1）
## AIテンプレート型業務プラットフォーム（仮称：Torrent4.0）

---

## 📋 目次
1. [目的とゴール](#1-目的とゴール)
2. [スコープ / 非スコープ](#2-スコープ--非スコープ)
3. [検証内容](#3-検証内容)
4. [実施環境](#4-実施環境)
5. [体制・RACI](#5-体制raci)
6. [スケジュール](#6-スケジュール)
7. [セキュリティおよび運用要件](#7-セキュリティおよび運用要件)
8. [参考見積](#8-参考見積)
9. [リスクと対応](#9-リスクと対応)
10. [成果物](#10-成果物)
11. [RD移行判定と次フェーズ](#11-rd移行判定と次フェーズ)
12. [進捗状況](#12-進捗状況)

---

## 1. 目的とゴール

### 🎯 目的（なぜ/何のために何をするのか）
Torrent4.0で主要機能としている以下の技術要素について、実現可能性を検証し、Torrent4.0への適用見通しを立てることを目的とする。

#### 業務テンプレート
- テンプレート間の疎結合連携
- AIによるテンプレート大量生成
- AIとの対話によるテンプレートのカスタマイズおよび適用

#### 統合基盤
- 複数データソースの自動データ統合
- 目標の達成度/進捗の自動分析
- AIによるインサイト/改善アドバイスの提示
- AIとの対話によるグラフ自動生成

### 🏁 ゴール（Go/No-Go：継続/中止判断）
以下を本PoCのゴールとし、本開発移行判定の際にそれぞれの達成度によって判断する。

#### 業務テンプレート（G1）
- **G1-1**: テンプレート間連携は疎結合（共通BO＋イベント）で、差替え時に他テンプレート改修ゼロ
- **G1-2**: テンプレート5種（例：見積/受注/生産計画/生産実績/出荷）をAI生成→即デプロイで通せる
- **G1-3**: AIカスタマイズで対話→テンプレートへのパッチ→プレビュー→承認→本適用が安全に回る

#### 統合基盤（G2）
- **G2-1**: AIによる支援（マッピング提案や名寄せなど）によって、torrent4.0が決まったフォーマットに半自動でデータ収集・統合できること
- **G2-2**: 蓄積データを元に、AIによる目標の達成度/進捗の自動分析ができること
- **G2-3**: 蓄積データを元に、AIによるインサイト/改善アドバイスの提示および分析内容の掘り下げができること
- **G2-4**: 蓄積データを元にした自然言語での指示によるグラフ自動生成およびグラフの保存ができること

---

## 2. スコープ / 非スコープ

### ✅ スコープ（PoCでやること）

#### 業務テンプレート
- 共通BO（SalesOrder/PurchaseOrder/Item/BOM/Inventory/Shipment など）＆イベント規約
- テンプレートDSL/スキャフォールド最小版（UI/API/権限/状態遷移）
- AIカスタマイズでの対話→DSLパッチ→静的検証→自動テスト→プレビュー→承認→本適用

#### 統合基盤
- データ収集に必要なコネクタ（RDB/CSV/REST API）の構築
- マッピング支援（AI提案およびエンドユーザーとの対話による確定）の実現方法検証
- AIによる目標達成度/進捗の自動分析手法確立
- AIによるインサイト/改善アドバイスの提示およびエンドユーザーとの対話による分析内容の掘り下げの仕組み構築
- AIによるグラフ自動生成およびエンドユーザーとの対話による生成グラフの微調整の仕組み構築
- AIとの対話で生成したグラフを保存/呼び出しする仕組み構築

### ❌ 非スコープ（PoCでやらないこと）
- 本番SLA/HAの厳格達成
- 巨大データ移行を伴う破壊的変更
- 外部SaaSの本格統合
- Torrent4.0システム自体の開発
- 本PoCはあくまでも技術要素の検証を目的とするため

---

## 3. 検証内容

### 🔧 業務テンプレート（T1）

#### T1-1. 選ぶだけ即利用 × 疎結合
**仮説**: テンプレートをプラグイン化し、共通BO＋イベントで配線できる

**Event-Driven Architecture**
- **作るもの**: BOモデル、イベント規約、プロビジョナ（選択→自動配線）

**評価観点**
- 受注v1→v2差替え、在庫ルール変更、品質検査追加

**KPI**
- 導入〜利用開始≦30分
- 差替え時の他テンプレート無改修
- E2E成功率≧95%

#### T1-2. テンプレート大量生成
**仮説**: メタモデル＋Few-shot/RAGで構成定義（JSON/YAML）を自動生成できる

**作るもの**: テンプレートDSL、プロンプト雛形、スキャフォールド

**評価観点**
- 業務別（見積/受注/計画/実績/出荷）×各3ケース

**KPI**
- テンプレート生成成功率≧80%
- 人手修正≦1h/テンプレート
- レビュー満足度≧4/5

#### T1-3. AIとの対話によるテンプレートのカスタマイズ
**仮説**: 自然言語要望をDSLパッチ化し、安全に適用できる

**作るもの**: Patch DSL、静的検証、テスト自動生成、プレビュー、HITL UI

**評価観点**
- 項目追加、検証ルール、ロール権限、簡易ワークフロー変更

**KPI**
- 要望→プレビュー≦2分
- 半自動適用率≧70%
- 参照整合/権限逸脱=0

### 🏗️ 統合基盤（T2）

#### T2-1. データ収集・統合自動化
**仮説**: AIによる支援（マッピング提案や名寄せなど）によって、エンドユーザーとの対話を通じて半自動でデータ収集・統合できる。

**作るもの**
- データ取り込みを行うコネクタ（API/DB/ファイル）
- AIでデータ収集・統合支援を行うための仕組み（チャットフローなど）

**評価観点**
- 複数のデータソース（API/DB/ファイル）を元にしたデータ統合
- コード体系が不一致のデータソース間のデータ統合
- 単位が異なるデータの変換

**KPI**
- マッピング適合率≧85%

#### T2-2. 目標の達成度/進捗の自動分析
**仮説**: AIエージェントで目標の関連データを抽出および分析し、結果をデータベースに保存することでエンドユーザーに通知できる。

**作るもの**
- AIで達成度/進捗分析を行うための仕組み（チャットフローなど）
- 分析結果をデータベースに保存する仕組み（データ保存APIなど）

**評価観点**
- 設定した目標と関連するデータを元にしたデータ分析
- ハルシネーションの発生割合

**KPI**
- KPI検算誤差≦2%

#### T2-3. AIによるインサイト/改善アドバイスの提示
**仮説**: AIエージェントで関連データの抽出および分析を行うことでインサイト/改善アドバイスを提示できる。提示内容についてエンドユーザーと対話を行い、分析内容の掘り下げができる。

**作るもの**
- AIでデータ分析を行うための仕組み（チャットフローなど）

**評価観点**
- ハルシネーションの発生割合
- エンドユーザーと複数回対話を行った場合の対話履歴の活用状況

**KPI**
- 根拠添付率=100%
- 重大誤助言=0

#### T2-4. AIによるグラフ自動生成
**仮説**: エンドユーザーが自然言語で必要なグラフを指示するとグラフを生成でき、内容によってエンドユーザーの調整指示によってグラフを再生成できる。エンドユーザーの承認を得たグラフは保持/参照できる。

**作るもの**
- AIでグラフ生成を行うための仕組み（Difyのチャットフローなど）
- グラフを保存するための仕組み（MCPサーバーを用いたフローなど）

**評価観点**
- グラフ種別（棒グラフ、折れ線グラフ、円グラフなど）ごとのパターン
- 複数テーブルを結合するグラフの生成指示
- 存在しないデータに対するグラフ生成指示によるハルシネーションの発生割合

**KPI**
- 正しいグラフの生成率≧80%

---

## 4. 実施環境

### 🔧 業務テンプレート
- **テンプレート層**: テンプレートDSL／スキャフォールド（UI+API+RBAC+Workflow）／イベント入出力
- **連携層**: イベントバス（SpringApplicationEvent/NATS/Kafka相当）、GraphQL/REST GW
- **データ層**: テンプレート専用RDB、テンプレート使用有無制御RDB
- **AI層**: HITL/運用：ロールバック、IaCで環境起動/破棄

### 🏗️ 統合基盤
- **インフラ基盤**: AWS、Docker
- **データ層**: 業務データ用RDB、統合基盤用RDB、DWH
- **AI層**: AIエージェント、LLM、MCP、RAG（必要に応じて）
- **アプリケーション層**: バックエンドAPI

### 📊 検証データ
- **内容**: ダミーデータ（MySQL）、取り込み用CSVファイル、API連携可能なSaaS
- **品質**: 欠損/桁/コード体系の混在サンプルを用意

---

## 5. 体制・RACI

### 🔧 業務テンプレート

| タスク | R：実行責任者 | A：説明責任者 | C：相談先 | I：報告先 |
|--------|---------------|---------------|-----------|-----------|
| KPI/合否判断 | PM | 事業責任者 | 現場リーダ/TechLead | 全員 |
| DSL/BO/イベント規約 | アーキ責任者 | PM | LLM Eng/Apps | QA |
| テンプレ生成/スキャフォ | LLM Eng/Apps | TechLead | QA | PM |
| セキュ/運用/HITL | QA/Sec | PM | TechLead | 全員 |

### 🏗️ 統合基盤

| タスク | R：実行責任者 | A：説明責任者 | C：相談先 | I：報告先 |
|--------|---------------|---------------|-----------|-----------|
| KPI/合否判断 | PM | 事業責任者 | 現場リーダ/TechLead | 全員 |
| データ統合基盤構築 | 担当者 | PM | PM | PM |
| AI基盤構築 | 担当者 | PM | PM | PM |

---

## 6. スケジュール（週次）

### 🔧 業務テンプレート

| 週 | 内容 | 詳細 |
|----|------|------|
| **W1** | 設計 | 仮説・KPI Fix／テンプレDSL最小版／BO・イベント草案／環境起動 |
| **W2** | 生成 | T1実装（生成パイプライン）／5テンプレ自動生成・静的検証／T6 Patch DSL設計開始 |
| **W3** | 疎結合 | T2（イベント配線・プロビジョナ）／テンプレ差替え試験／E2Eフロー①／T6 プランナーα |
| **W4** | 統合 | T3（コネクタ＋マッピング支援）／統合ビュー／E2Eフロー②／T6 静的検証＋自動テスト＋プレビュー |
| **W5** | 分析 | T4（Goal/KPI・通知）／T5（助言＋HITL）／ユーザ評価①（10ケースの変更要望をT6で反映） |
| **W6** | 仕上げ | 非機能（RBAC/監査/ログ/ロールバック）／最終デモ／評価報告＆RD移行提案 |

**マイルストーン**
- **M1(W2末)**: テンプレ5種起動
- **M2(W4末)**: 統合＋E2E通過
- **M3(W6)**: 一気通貫デモ&判定

### 🏗️ 統合基盤

| 週 | 内容 | 詳細 |
|----|------|------|
| **W1** | 準備 | 仮説・KPI Fix／環境起動 |
| **W2** | XX | |
| **W3** | XX | |
| **W4** | XX | コネクタ＋マッピング支援／統合ビュー |
| **W5** | XX | Goal/KPI・通知／助言 |
| **W6** | 評価 | 最終デモ／評価報告＆RD移行提案 |

**マイルストーン**
- **M1(W2末)**: テンプレ5種起動
- **M2(W4末)**: 統合＋E2E通過
- **M3(W6)**: 一気通貫デモ&判定

---

## 7. セキュリティおよび運用要件

### 🔧 業務テンプレート
- **RBAC**: 最小権限、テナント分離、個人情報取扱は匿名化/持出禁止
- **HITL**: 差分プレビュー→承認（現場責任者＋PM）→適用、ロールバックポイント自動生成
- **監査**: すべての生成/適用/助言/承認を監査ログに記録

### 🏗️ 統合基盤
- **データ分離**: DWH内のデータはテナント間で分離し、異なるテナント間ではデータの参照ができないようにすること
- **監査ログ**: すべての生成結果や改善アドバイス、承認結果をログに記録すること
- **コスト可視化**: テナントごとの利用コストが可視化できるような仕組みを検討すること

---

## 8. 参考見積（PG/PT中心・レンジ）

- **画面**: 2〜4人日/枚
- **API**: 2〜3人日/本
- **ETL**: 2〜4人日/系
- **モデル/助言**: 5〜10人日/テーマ

**品質付帯**
- テスト設計: 20〜30%
- ドキュメント: 10〜20%
- PM: 15〜20%
- 不確実性: 15〜25%

**例（POC一式）**: 合計 45〜60人日 目安（構成・データ条件により変動）

---

## 9. リスクと対応

### 🔧 業務テンプレート

| リスク | 兆候 | 対応 |
|--------|------|------|
| 疎結合破綻 | 他テンプレ巻き込み改修 | BO/イベントの後方互換、アダプタ層 |
| 生成ばらつき | 生成JSONの整合エラー | JSON Schema拘束、単体テスト自動生成 |
| スコープ膨張 | 要望追加が連発 | 変更要求（CR）と軽微変更枠を分離、週次PRB |

### 🏗️ 統合基盤

| リスク内容 | 発生要因 | 影響度 | 対策／回避策 |
|------------|----------|--------|--------------|
| 本番規模で性能が出ない | PoCは小規模データ／低負荷で実施 | 高 | |
| 本番データと差異が大きい | PoCではダミーデータや限定データを利用 | 高 | |
| AIやデータ統合に対する知見不足による作業遅延 | ノウハウがないことによる技術調査やトライ＆エラーの頻発 | 高 | AIの有識者による支援 |
| 本番運用でのランニングコスト増加 | ユーザーのAI利用頻度が想定よりも多い | 中 | 事前のコスト算出時に想定シーンと利用頻度の上振れを加味、実装時に利用制限を設ける |
| AIの分析精度が低いことによるUXが不十分になる可能性 | プロンプトの調整不足、複雑なデータ分析の限界 | 高 | AIやデータ分析の有識者による支援 |
| AIがハルシネーションを起こす可能性 | AIのデータ読み違え（形式が類似しているデータなど） | 高 | AIの有識者による支援 |
| 運用負荷が不明確 | 監視・障害対応の仕組みが未検討 | 中 | |
| データ収集時の単位やコード体系の不一致 | 取り込み元の管理方法差異 | 高 | |

---

## 10. 成果物（PoC完了時）

### 🔧 業務テンプレート

#### 動く資産
- テンプレ5種
- プラグイン
- イベント配線
- カスタマイズ基盤

#### ドキュメント
- DSL仕様
- BO/イベント規約
- セキュリティ/運用
- 評価報告
- RD移行提案
- 自動開発手順書

### 🏗️ 統合基盤

#### 動く資産
- 各検証内容ごとのチャットフロー
- DWHのコネクタ生成API
- DWH動作環境
- AI動作環境

#### ドキュメント
- 環境構築手順書（AI/DWH/MCP）
- サービス構成図
- セキュリティ/運用想定
- 評価報告
- RD移行提案

---

## 11. RD移行判定と次フェーズ

### 📊 判定基準
- G1、G2の達成度
- 実サービスで運用する場合の見通し
- セキュリティ
- 投資対効果の見立て

### 🚀 次フェーズ案
- **最小有用セット**: 受注/在庫/出荷＋KPI/通知を製造部門1ラインへパイロット
- **本番SLA対応**: 監視/バックアップ/DR、外部SaaS連携の拡張
- **テンプレのSemVer運用・マーケット化**: 配信/互換/EoL

---

## 12. 進捗状況

### 📈 PoC実施報告
**進捗（2025/10/08）**

#### 🏗️ 統合基盤（T2）
**T2進捗率：29%**

##### T2-1. データ収集・統合自動化
**検証進捗率：29%**

| No. | 作業内容 | 進捗率（%） | 備考 |
|-----|----------|-------------|------|
| 1 | データ基盤（DWH）の選定 | 100 | Amazon Redshiftを想定 |
| 2 | データソース（API/DB/ファイル）ごとの取り込み方法確認 | 100 | |
| 3 | 環境構築 | 100 | |
| 4 | 単純なデータ取り込み動作の確認（API/DB/ファイル） | 60 | ファイルについて確認中 |
| 5 | AIを用いたデータ収集設定フローの検討 | 20 | 検討中 |
| 6 | データ収集プロンプト作成 | 0 | |
| 7 | AIを用いたデータ収集設定動作検証 | 0 | |
| 8 | データソース間のデータ統合方法検討 | 0 | |
| 9 | 手動によるデータ統合動作確認 | 0 | |
| 10 | AIを用いたデータ統合設定フローの検討 | 0 | |
| 11 | データ統合プロンプト作成 | 0 | |
| 12 | AIを用いたデータ統合設定動作検証 | 0 | |
| 13 | データ収集・統合の一連の流れの評価 | 0 | |

##### T2-2. 目標の達成度/進捗の自動分析
**検証進捗率：33%**

| No. | 作業内容 | 進捗率（%） | 備考 |
|-----|----------|-------------|------|
| 1 | AIツールの選定 | 100 | Difyを想定 |
| 2 | 環境構築 | 100 | |
| 3 | データ基盤との接続方法確立 | 100 | MCPサーバーを使用 |
| 4 | AIを用いた自動分析フローの検討 | 0 | |
| 5 | データ抽出/分析プロンプト作成 | 0 | |
| 6 | AIを用いたデータ抽出/分析精度検証 | 0 | |
| 7 | DBへのデータ保存の仕組み検討 | 0 | |
| 8 | データ保存動作検証 | 0 | |
| 9 | データ抽出・分析・保存の一連の流れの評価 | 0 | |

##### T2-3. AIによるインサイト/改善アドバイスの提示
**検証進捗率：28%**

| No. | 作業内容 | 進捗率（%） | 備考 |
|-----|----------|-------------|------|
| - | AIツールの選定 | - | T2-2で対応 |
| - | 環境構築 | - | T2-2で対応 |
| - | データ基盤との接続方法確立 | - | T2-2で対応 |
| 1 | AIを用いたデータ分析フローの検討 | 60 | |
| 2 | データ抽出/分析プロンプト構築 | 50 | 抽出対象データのぶれについて調整中 |
| 3 | AIを用いたデータ抽出/分析精度検証 | 30 | |
| 4 | AIとの対話による分析内容の掘り下げ検証 | 0 | |
| 5 | データ抽出・分析・掘り下げの一連の流れの評価 | 0 | |

##### T2-4. AIによるグラフ自動生成
**検証進捗率：27%**

| No. | 作業内容 | 進捗率（%） | 備考 |
|-----|----------|-------------|------|
| - | AIツールの選定 | - | T2-2で対応 |
| - | 環境構築 | - | T2-2で対応 |
| - | データ基盤との接続方法確立 | - | T2-2で対応 |
| 1 | グラフ生成ツール選定 | 100 | Metabaseを想定 |
| 2 | グラフ生成ツールとの接続方法確立 | 100 | MCPサーバーを使用 |
| 3 | AIを用いたグラフ生成フローの検討 | 10 | 簡単な動作確認のみ |
| 4 | グラフ生成プロンプト作成 | 10 | 簡単な動作確認のみ |
| 5 | AIを用いたグラフ生成精度検証 | 0 | |
| 6 | AIとの対話によるグラフ内容調整検証 | 0 | |
| 7 | エンドユーザーの承認によるグラフ保存動作検証 | 0 | |
| 8 | グラフ生成・調整・保存の一連の流れの評価 | 0 | |

---

<div align="center">

**📅 最終更新**: 2025年10月8日
**👤 記録者**: 開発チーム
**📊 情報源**: PoC計画（Draft v1）
**🔄 次回更新予定**: 進捗に基づき随時更新

---

*🚀 Torrent4.0 - AIテンプレート型業務プラットフォームのPoC計画*

</div>
